!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},i={},n=t.parcelRequired7c6;null==n&&((n=function(t){if(t in e)return e[t].exports;if(t in i){var n=i[t];delete i[t];var s={id:t,exports:{}};return e[t]=s,n.call(s.exports,s,s.exports),s.exports}var l=new Error("Cannot find module '"+t+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(t,e){i[t]=e},t.parcelRequired7c6=n),n("kvC6y"),n("hM3Qt");var s=n("hM3Qt"),l=n("2cELT");const a="https://api.themoviedb.org/3/movie/",r={btnQueue:document.querySelector("#queue"),btnWatched:document.querySelector("#watched"),text:document.querySelector("#text"),filmList:document.querySelector(".film_list")};r.btnQueue.addEventListener("click",(function(){c(),r.filmList.innerHTML="";try{const t=JSON.parse(localStorage.getItem("queue").split(","));t.length>0?t.map((t=>(async t=>{const e=await fetch(`${a}${t}?api_key=${s.API_KEY}`);return await e.json()})(t).then((t=>{m(t).then((t=>{r.filmList.insertAdjacentHTML("beforeend",t)}))})))):o()}catch(t){o()}})),r.btnWatched.addEventListener("click",(function(){c(),r.filmList.innerHTML="";try{const t=JSON.parse(localStorage.getItem("watched").split(","));t.length>0?t.map((t=>(async t=>{const e=await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=${s.API_KEY}`);return await e.json()})(t).then((t=>{m(t).then((t=>{r.filmList.insertAdjacentHTML("beforeend",t)}))})))):o()}catch(t){o()}}));function o(){r.filmList.innerHTML='<p class="library-message">Sorry, list is empty(</p>'}function c(){r.text.classList.contains("library-message")&&(r.text.classList.remove("library-message"),r.text.classList.add("library-message-hidden"))}function m(t){const e=function(t){return 0===t.genres.length?"Without genres":l.arrayOfGenres.then((e=>e.filter((e=>{for(const i of t.genres)if(i.id===e.id)return e.name})).map((t=>t.name)))).then((t=>t.length<3?t:[...[...t].slice(0,2),"Other"]))}(t),i=function(t){return t.release_date.split("-")}(t);return async function(t,e,i){if("Without genres"===e)return`<li film-id="${t.id}" class="film-list__item">\n  <img\n    src=${f(t)}\n    alt="${t.title}"\n    class="film-list__item-poster"\n    film-id="${t.id}"\n    loading="lazy"\n  />\n  <div class="film-list__item-info">\n    <h3 class="film-list__item-title">${t.title}</h3>\n    <div class="film-list__item-details">\n      <span class="film-list__item-genres">${e}</span>\n      <span class="film-list__item-strip">|</span>\n      <span class="film-list__item-year">${i[0]}</span>\n      <span class="film-list__item-rate">&nbsp;${t.vote_average.toFixed(1)}&nbsp;</span>\n    </div>\n  </div>\n</li>`;const n=await e.then((t=>t));return`<li film-id="${t.id}" class="film-list__item">\n  <img\n    src=${f(t)}\n    alt="${t.title}"\n    class="film-list__item-poster"\n    film-id="${t.id}"\n    loading="lazy"\n  />\n  <div class="film-list__item-info">\n    <h3 class="film-list__item-title">${t.title}</h3>\n    <div class="film-list__item-details">\n      <span class="film-list__item-genres">${n.join(", ")}</span>\n      <span class="film-list__item-strip">|</span>\n      <span class="film-list__item-year">${i[0]}</span>\n      <span class="film-list__item-rate">&nbsp;${t.vote_average.toFixed(1)}&nbsp;</span>\n    </div>\n  </div>\n</li>`}(t,e,i)}function f(t){return null!==t.poster_path?`"https://image.tmdb.org/t/p/w500${t.poster_path}"`:'"https://raw.githubusercontent.com/Alexandra-Makarenko/filmoteka-js-team-project/main/src/images/no-poster.jpg"'}n("6yEBv"),n("2cELT"),n("4F07H"),n("4wqrs"),n("ajbKe"),n("1vR0Z"),n("7Uufj")}();
//# sourceMappingURL=library.e6d2cec3.js.map
