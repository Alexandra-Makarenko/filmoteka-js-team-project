var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var s={id:e,exports:{}};return t[e]=s,n.call(s.exports,s,s.exports),s.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){i[e]=t},e.parcelRequired7c6=n),n("gjiCh"),n("fPgXx");var s=n("fPgXx"),l=n("32hWK");const a={btnQueue:document.querySelector("#queue"),btnWatched:document.querySelector("#watched"),text:document.querySelector("#text"),filmList:document.querySelector(".film_list")};a.btnQueue.addEventListener("click",(function(){o(),a.filmList.innerHTML="";try{const e=JSON.parse(localStorage.getItem("queued").split(","));e.length>0?e.map((e=>(async e=>{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${s.API_KEY}`);return await t.json()})(e).then((e=>{c(e).then((e=>{a.filmList.insertAdjacentHTML("beforeend",e)}))})))):r()}catch(e){r()}})),a.btnWatched.addEventListener("click",(function(){o(),a.filmList.innerHTML="";try{const e=JSON.parse(localStorage.getItem("watched").split(","));e.length>0?e.map((e=>(async e=>{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${s.API_KEY}`);return await t.json()})(e).then((e=>{c(e).then((e=>{a.filmList.insertAdjacentHTML("beforeend",e)}))})))):r()}catch(e){r()}}));function r(){a.filmList.innerHTML='<p class="library-message">Sorry, list is empty(</p>'}function o(){a.text.classList.contains("library-message")&&(a.text.classList.remove("library-message"),a.text.classList.add("library-message-hidden"))}function c(e){const t=function(e){return 0===e.genres.length?"Without genres":l.arrayOfGenres.then((t=>t.filter((t=>{for(const i of e.genres)if(i.id===t.id)return t.name})).map((e=>e.name)))).then((e=>e.length<3?e:[...[...e].slice(0,2),"Other"]))}(e),i=function(e){return e.release_date.split("-")}(e);return async function(e,t,i){if("Without genres"===t)return`<li film-id="${e.id}" class="film-list__item">\n  <img\n    src=${m(e)}\n    alt="${e.title}"\n    class="film-list__item-poster"\n    film-id="${e.id}"\n    loading="lazy"\n  />\n  <div class="film-list__item-info">\n    <h3 class="film-list__item-title">${e.title}</h3>\n    <div class="film-list__item-details">\n      <span class="film-list__item-genres">${t}</span>\n      <span class="film-list__item-strip">|</span>\n      <span class="film-list__item-year">${i[0]}</span>\n      <span class="film-list__item-rate">&nbsp;${e.vote_average.toFixed(1)}&nbsp;</span>\n    </div>\n  </div>\n</li>`;const n=await t.then((e=>e));return`<li film-id="${e.id}" class="film-list__item">\n  <img\n    src=${m(e)}\n    alt="${e.title}"\n    class="film-list__item-poster"\n    film-id="${e.id}"\n    loading="lazy"\n  />\n  <div class="film-list__item-info">\n    <h3 class="film-list__item-title">${e.title}</h3>\n    <div class="film-list__item-details">\n      <span class="film-list__item-genres">${n.join(", ")}</span>\n      <span class="film-list__item-strip">|</span>\n      <span class="film-list__item-year">${i[0]}</span>\n      <span class="film-list__item-rate">&nbsp;${e.vote_average.toFixed(1)}&nbsp;</span>\n    </div>\n  </div>\n</li>`}(e,t,i)}function m(e){return null!==e.poster_path?`"https://image.tmdb.org/t/p/w500${e.poster_path}"`:'"https://raw.githubusercontent.com/Alexandra-Makarenko/filmoteka-js-team-project/main/src/images/no-poster.jpg"'}n("eVFhx"),n("32hWK"),n("6HA5D"),n("1WbfJ"),n("bqRoZ"),n("eS71k"),n("8y7EH");
//# sourceMappingURL=library.8ae68be4.js.map
