!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=e.parcelRequired7c6;null==r&&((r=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var r={id:t,exports:{}};return n[t]=r,e.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){i[t]=e},e.parcelRequired7c6=r),r("kvC6y"),r("hM3Qt");var s=r("bpxeT"),a=r("8nrFW"),c=r("2TvXO"),l=r("hM3Qt"),o=r("2cELT"),u={btnQueue:document.querySelector("#queue"),btnWatched:document.querySelector("#watched"),text:document.querySelector("#text"),filmList:document.querySelector(".film_list")};u.btnQueue.addEventListener("click",(function(){d(),u.filmList.innerHTML="";try{JSON.parse(localStorage.getItem("queued").split(",")).map((function(t){return p(t).then((function(t){_(t).then((function(t){u.filmList.insertAdjacentHTML("beforeend",t)}))}))}))}catch(t){u.filmList.innerHTML='<p class="library-message">Sorry, list is empty(</p>'}})),u.btnWatched.addEventListener("click",(function(){d(),u.filmList.innerHTML="";try{JSON.parse(localStorage.getItem("watched").split(",")).map((function(t){return m(t).then((function(t){_(t).then((function(t){u.filmList.insertAdjacentHTML("beforeend",t)}))}))}))}catch(t){u.filmList.innerHTML='<p class="library-message">Sorry, list is empty(</p>'}}));var f,p=(f=t(s)(t(c).mark((function e(n){var i,r;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://api.themoviedb.org/3/movie/").concat(n,"?api_key=").concat(l.API_KEY));case 2:return i=t.sent,t.next=5,i.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),e)}))),function(t){return f.apply(this,arguments)});var m=function(){var e=t(s)(t(c).mark((function e(n){var i,r;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(n,"?api_key=").concat(l.API_KEY));case 2:return i=t.sent,t.next=5,i.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function d(){u.text.classList.contains("library-message")&&(u.text.classList.remove("library-message"),u.text.classList.add("library-message-hidden"))}function _(e){var n=function(e){return 0===e.genres.length?"Without genres":o.arrayOfGenres.then((function(t){return t.filter((function(t){var n=!0,i=!1,r=void 0;try{for(var s,a=e.genres[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){if(s.value.id===t.id)return t.name}}catch(t){i=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}})).map((function(t){return t.name}))})).then((function(e){return e.length<3?e:t(a)(t(a)(e).slice(0,2)).concat(["Other"])}))}(e),i=function(t){return t.release_date.split("-")}(e);return function(t,e,n){return h.apply(this,arguments)}(e,n,i)}function h(){return(h=t(s)(t(c).mark((function e(n,i,r){var s;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Without genres"!==i){t.next=2;break}return t.abrupt("return",'<li film-id="'.concat(n.id,'" class="film-list__item">\n  <img\n    src=').concat(v(n),'\n    alt="').concat(n.title,'"\n    class="film-list__item-poster"\n    film-id="').concat(n.id,'"\n    loading="lazy"\n  />\n  <div class="film-list__item-info">\n    <h3 class="film-list__item-title">').concat(n.title,'</h3>\n    <div class="film-list__item-details">\n      <span class="film-list__item-genres">').concat(i,'</span>\n      <span class="film-list__item-strip">|</span>\n      <span class="film-list__item-year">').concat(r[0],'</span>\n      <span class="film-list__item-rate">&nbsp;').concat(n.vote_average.toFixed(1),"&nbsp;</span>\n    </div>\n  </div>\n</li>"));case 2:return t.next=4,i.then((function(t){return t}));case 4:return s=t.sent,t.abrupt("return",'<li film-id="'.concat(n.id,'" class="film-list__item">\n  <img\n    src=').concat(v(n),'\n    alt="').concat(n.title,'"\n    class="film-list__item-poster"\n    film-id="').concat(n.id,'"\n    loading="lazy"\n  />\n  <div class="film-list__item-info">\n    <h3 class="film-list__item-title">').concat(n.title,'</h3>\n    <div class="film-list__item-details">\n      <span class="film-list__item-genres">').concat(s.join(", "),'</span>\n      <span class="film-list__item-strip">|</span>\n      <span class="film-list__item-year">').concat(r[0],'</span>\n      <span class="film-list__item-rate">&nbsp;').concat(n.vote_average.toFixed(1),"&nbsp;</span>\n    </div>\n  </div>\n</li>"));case 6:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function v(t){return null!==t.poster_path?'"https://image.tmdb.org/t/p/w500'.concat(t.poster_path,'"'):'"https://raw.githubusercontent.com/Alexandra-Makarenko/filmoteka-js-team-project/main/src/images/no-poster.jpg"'}r("6yEBv"),r("2cELT"),r("4F07H"),r("4wqrs"),r("ajbKe"),r("1vR0Z"),r("7Uufj")}();
//# sourceMappingURL=library.b23aadae.js.map
